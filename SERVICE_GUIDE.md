# 전통 조경 안전 지도 서비스 (TLSM)

> **프로젝트 개요 및 사용 가이드**
> **버전**: 2.1.0
> **작성일**: 2025-10-01
> **대상**: 기획자, 디자이너, 개발자, 관리자

---

## 📦 빠른 시작

### 설치 및 실행 (2단계)

```
1. 압축 해제
   └─ 다운로드한 압축 파일을 원하는 위치에 압축 해제

2. 실행
   └─ index.html 파일을 더블클릭
   └─ 자동으로 브라우저가 열리면서 서비스 시작
```

💡 **참고:** 지도 기능을 사용하려면 Google Maps API 키가 필요합니다 (자세한 내용은 README.md 참조)

---

## 📌 프로젝트 개요

### 서비스 목적
문화재 조경 시설물(담장, 석축, 연못 등)의 **안전 점검 및 이력 관리**를 위한 **지도 기반 웹 애플리케이션**

### 핵심 가치
- 📍 **시각화** - 지도 위에서 위험 지역을 한눈에 파악
- 📋 **이력 관리** - 과거 점검 기록을 체계적으로 조회
- ✅ **현장 점검** - 모바일/태블릿으로 현장에서 즉시 기록

---

## 🎯 사용자 타겟

| 사용자 | 주요 업무 | 사용 기능 |
|--------|----------|----------|
| **문화재 관리자** | 전체 현황 파악 및 의사결정 | 이력 확인, 대시보드 |
| **안전 점검원** | 현장 안전 점검 수행 | 현장 점검 입력 |
| **담당 공무원** | 보고서 확인 및 승인 | 이력 확인, 통계 조회 |

---

## 🗂️ 프로젝트 구조

```
TLSM/
│
├─ 📄 핵심 파일
│  ├─ index.html                  # 메인 진입점
│  ├─ config.js                   # Google Maps API 설정
│  └─ SERVICE_GUIDE.md            # 본 문서
│
├─ 🔐 사용자 인증
│  ├─ login.html                  # 로그인 화면
│  └─ dashboard.html              # 메인 대시보드
│
├─ 📋 안전 관리 이력 (조회)
│  ├─ site-selection.html         # 대상지 선택
│  ├─ site-detail.html            # 대상지 상세
│  ├─ safety-history-info.html    # 기본 정보 탭
│  ├─ safety-history-disaster.html # 재해 이력 탭 ⭐ (지도 핵심)
│  ├─ safety-history-repair.html  # 수리 이력 탭
│  └─ safety-history-environment.html # 주변 환경 탭
│
├─ ✅ 안전 점검 실시 (입력)
│  ├─ inspection-login.html       # 점검 로그인
│  ├─ inspection-site-selection.html # 대상지 선택
│  ├─ inspection-target-selection.html # 점검 지점 선택
│  ├─ inspection-general-status.html # 일반 현황 입력
│  ├─ inspection-checklist.html   # 체크리스트
│  ├─ inspection-result.html      # 종합 결과 입력
│  ├─ inspection-confirmation.html # 최종 확인
│  └─ inspection-report-preview.html # 보고서 미리보기
│
├─ 🎨 스타일 & 스크립트
│  ├─ css/
│  │  ├─ variables.css            # 디자인 토큰 (색상, 폰트, 간격)
│  │  ├─ reset.css                # CSS 초기화
│  │  ├─ layout.css               # 레이아웃 (그리드, 헤더, 사이드바)
│  │  └─ components.css           # 공통 컴포넌트 (버튼, 카드, 폼)
│  │
│  └─ js/
│     ├─ sidebar.js               # 사이드바 공통 로직
│     └─ common-sidebar.js        # 사이드바 재사용 모듈
│
└─ 📁 에셋
   └─ assets/
      ├─ images/                  # 이미지 리소스
      └─ icons/                   # 아이콘 파일
```

---

## 🔄 서비스 플로우

```
                         [시작]
                           │
                           ▼
                   ┌───────────────┐
                   │  index.html   │
                   │   메인 화면    │
                   └───┬───────┬───┘
                       │       │
            ┌──────────┘       └──────────┐
            │                             │
            ▼                             ▼
    ┌──────────────┐              ┌──────────────┐
    │ 📋 이력 확인  │              │ ✅ 현장 점검  │
    │ (과거 조회)   │              │ (실시간 입력) │
    └──────┬───────┘              └──────┬───────┘
           │                             │
           ▼                             ▼
    ┌──────────┐                  ┌──────────┐
    │ 로그인    │                  │ 로그인    │
    └────┬─────┘                  └────┬─────┘
         │                              │
         ▼                              ▼
    대상지 선택                     대상지 선택
         │                              │
         ▼                              ▼
    ┌──────────┐                  ┌──────────┐
    │ 지도 조회 │                  │ 1. 일반현황│
    │          │                  │ 입력      │
    │ • 필터   │                  └────┬─────┘
    │ • 마커   │                       │
    │ • 상세   │                       ▼
    └──────────┘                  ┌──────────┐
                                  │2.체크리스트│
                                  │  작성     │
                                  └────┬─────┘
                                       │
                                       ▼
                                  ┌──────────┐
                                  │ 3. 종합  │
                                  │   결과   │
                                  └────┬─────┘
                                       │
                                       ▼
                                  ┌──────────┐
                                  │ 4. 최종  │
                                  │   제출   │
                                  └──────────┘
```

---

## 🎨 디자인 시스템

### 색상 체계

```css
/* Primary Colors */
--color-primary: #1976D2          /* 메인 블루 (버튼, 강조) */
--color-secondary: #4CAF50        /* 그린 (성공, 안전) */
--color-danger: #F44336           /* 레드 (위험, 경고) */
--color-warning: #FF9800          /* 오렌지 (주의) */

/* Status Colors */
🔴 위험 (#F44336) - 즉시 조치 필요
🟠 주의 (#FF9800) - 지속 관찰 필요
🟢 안전 (#4CAF50) - 정상 상태

/* Background */
--color-bg-primary: #FFFFFF       /* 메인 배경 */
--color-bg-secondary: #F5F5F5     /* 서브 배경 */
--color-bg-tertiary: #FAFAFA      /* 카드 배경 */
```

### 타이포그래피

```css
/* Font Sizes */
--font-size-xs: 12px
--font-size-sm: 14px
--font-size-base: 16px            /* 기본 본문 */
--font-size-lg: 18px
--font-size-xl: 20px
--font-size-2xl: 24px
--font-size-3xl: 32px
--font-size-4xl: 40px

/* Font Weights */
--font-weight-regular: 400
--font-weight-medium: 500
--font-weight-semibold: 600
--font-weight-bold: 700
```

### 간격 시스템

```css
--spacing-xs: 4px
--spacing-sm: 8px
--spacing-md: 16px               /* 기본 간격 */
--spacing-lg: 24px
--spacing-xl: 32px
--spacing-2xl: 48px
--spacing-3xl: 64px
```

### 컴포넌트

| 컴포넌트 | 클래스명 | 용도 |
|---------|---------|------|
| **버튼** | `.btn`, `.btn--primary`, `.btn--ghost` | 주요 액션, 보조 액션 |
| **카드** | `.card`, `.card--hover` | 콘텐츠 그룹화 |
| **폼** | `.form-group`, `.form-input` | 데이터 입력 |
| **탭** | `.tabs`, `.tab--active` | 콘텐츠 전환 |
| **모달** | `.modal`, `.modal__overlay` | 팝업 표시 |

---

## 🗺️ 핵심 기능 상세

### 1️⃣ 안전 관리 이력 확인 (지도 조회)

#### 화면: safety-history-disaster.html ⭐

**주요 기능:**
```
┌─────────────────────────────────────────────┐
│ 재해 및 수리 이력                            │
│                                             │
│ [연도▼] [재해 유형▼] [대상지▼]  ← 필터     │
├──────┬──────────────────────────────────────┤
│      │ [🗺️ 지도] [📋 목록]   ← 뷰 전환     │
│ 연도 │                                      │
│ ────│          🗺️ Google Maps              │
│ 전체 │                                      │
│ 2025 │    🔴 위험 지점                      │
│ 2024 │    🟠 주의 지점                      │
│ 2023 │    🟢 안전 지점                      │
│ 2022 │                                      │
│ 2021 │                       ┌───────────┐ │
│      │                       │ 🔴 위험    │ │
│      │                       │ 🟠 주의    │ │
│      │                       │ 🟢 안전    │ │
│      │                       └───────────┘ │
└──────┴──────────────────────────────────────┘
```

**필터링 옵션:**
- **연도**: 전체 / 2021~2025
- **재해 유형**: 균열, 붕괴, 식생침투, 배수불량, 풍화
- **대상지**: 담장, 석축, 화계, 연못

**마커 상세 정보 (클릭 시 모달):**
```
┌────────────────────────────────┐
│ 돈화문 담장 A구간         [✕] │
├──────────┬─────────────────────┤
│          │ 📍 위치: 돈화문 담장 │
│   📊    │ 📅 점검일: 2024-09-15│
│  차트    │ ⚠️  문제: 균열       │
│          │ 🟢 판정: 안전        │
│          │ 👤 담당자: 홍길동    │
│          │                     │
│          │ 💬 의견:            │
│          │ "경미한 균열 발견,   │
│          │  지속 관찰 필요"     │
│          │                     │
│          │ 📷 [사진 보기]      │
└──────────┴─────────────────────┘
```

**기술 스택:**
- Google Maps JavaScript API
- Custom Marker Clustering
- Responsive Map Controls

---

### 2️⃣ 안전 점검 실시 (현장 입력)

#### 4단계 점검 프로세스

```
┌───────────────────────────────────────────────┐
│ STEP 1. 일반 현황 입력                         │
├───────────────────────────────────────────────┤
│ • 점검 날짜 및 시간 자동 기록                  │
│ • 날씨 선택: ☀️ 맑음 / ☁️ 흐림 / 🌧️ 비       │
│ • 전체 상태 설명 (텍스트 입력)                 │
│ • 전경 사진 촬영 (카메라/갤러리)               │
└───────────────────────────────────────────────┘

┌───────────────────────────────────────────────┐
│ STEP 2. 체크리스트 작성                        │
├───────────────────────────────────────────────┤
│ 1. 구조적 안전성                               │
│    ☐ 균열 상태       [양호/보통/불량/해당없음] │
│    ☐ 석축 안정성     [양호/보통/불량/해당없음] │
│    ☐ 담장 기울기     [양호/보통/불량/해당없음] │
│                                               │
│ 2. 배수 시스템                                 │
│    ☐ 배수로 상태     [양호/보통/불량/해당없음] │
│    ☐ 우수 처리       [양호/보통/불량/해당없음] │
│                                               │
│ 3. 식생 관리                                   │
│    ☐ 식생 침투       [양호/보통/불량/해당없음] │
│    ☐ 뿌리 영향       [양호/보통/불량/해당없음] │
│                                               │
│ 4. 주변 환경                                   │
│    ☐ 토양 유실       [양호/보통/불량/해당없음] │
│    ☐ 지반 침하       [양호/보통/불량/해당없음] │
└───────────────────────────────────────────────┘

┌───────────────────────────────────────────────┐
│ STEP 3. 종합 결과 입력                         │
├───────────────────────────────────────────────┤
│ • 종합 의견 (상세 기록)                        │
│ • 조치 사항 (보수 필요 사항 명시)              │
│ • 증빙 사진 (최대 5장)                         │
│ • 최종 판정: 🟢 안전 / 🟠 주의 / 🔴 위험       │
└───────────────────────────────────────────────┘

┌───────────────────────────────────────────────┐
│ STEP 4. 최종 확인 및 제출                      │
├───────────────────────────────────────────────┤
│ 입력한 모든 내용 검토                          │
│ [수정] [제출]                                  │
└───────────────────────────────────────────────┘
```

**데이터 저장:**
- LocalStorage 기반 임시 저장 (브라우저)
- 제출 시 이력 DB에 추가 (추후 서버 연동)

---

## 📍 지원 대상지

| 대상지 | 점검 지점 수 | 주요 시설물 | 좌표 (위도, 경도) |
|--------|------------|-----------|------------------|
| **창덕궁 후원** | 12개 | 담장, 석축, 연못 | (37.5794, 126.9910) |
| **비원 석축** | 4개 | 석축 | (37.5825, 126.9950) |
| **종묘** | 4개 | 담장, 석축 | (37.5745, 126.9940) |
| **덕수궁** | 4개 | 석축, 화계 | (37.5658, 126.9751) |
| **창경궁** | 4개 | 담장, 연못 | (37.5792, 126.9950) |

**총 28개 점검 지점**

---

## 🔧 기술 스펙

### 프론트엔드

```
기술 스택:
├─ HTML5 (Semantic Markup)
├─ CSS3 (Custom Properties, Grid, Flexbox)
├─ JavaScript (ES6+, Vanilla JS)
└─ Google Maps JavaScript API

디자인 패턴:
├─ CSS Variables (디자인 토큰)
├─ BEM 네이밍 컨벤션
└─ 모듈화된 CSS 구조
```

### 브라우저 지원

- ✅ Chrome 90+
- ✅ Edge 90+
- ✅ Firefox 88+
- ✅ Safari 14+

### 반응형 지원

```css
/* Breakpoints */
Mobile:  ~ 768px
Tablet:  768px ~ 1024px
Desktop: 1024px ~
```

### API 통합

**Google Maps API:**
- Maps JavaScript API
- Geocoding API
- Street View API (선택)

**필요 권한:**
- Maps JavaScript API 활성화
- API Key 발급 (월 200달러 무료 크레딧)

---

## 📋 요구사항 및 기능 리스트

### 필수 요구사항 (MVP)

- [x] 메인 진입 화면
- [x] 사용자 로그인 (간이)
- [x] 대상지 선택
- [x] 지도 기반 이력 조회
- [x] 필터링 (연도, 재해 유형, 대상지)
- [x] 마커 클러스터링
- [x] 상세 정보 모달
- [x] 현장 점검 4단계 프로세스
- [x] 체크리스트 입력
- [x] 사진 촬영/업로드
- [x] 로컬 데이터 저장

### 향후 개발 예정 (Phase 2)

- [ ] 백엔드 서버 구축 (Node.js/Django)
- [ ] 데이터베이스 연동 (PostgreSQL/MySQL)
- [ ] 실제 회원 관리 (JWT 인증)
- [ ] 보고서 자동 생성 (PDF Export)
- [ ] 실시간 알림 (WebSocket)
- [ ] 통계 대시보드 (Chart.js)
- [ ] 모바일 앱 (React Native/Flutter)

### 향후 개선 사항 (Phase 3)

- [ ] AI 균열 감지 (Computer Vision)
- [ ] 드론 촬영 이미지 연동
- [ ] 3D 모델 뷰어
- [ ] 다국어 지원 (영어, 중국어)
- [ ] 접근성 개선 (WCAG 2.1 AA)

---

## 🎯 사용 시나리오

### 시나리오 1: 관리자 - 2024년 균열 발생 지점 확인

```
1. 메인 화면에서 [📋 이력 확인] 클릭
2. 로그인 (테스트용 넘어가기)
3. 대상지 선택: "창덕궁 후원"
4. 재해 이력 탭 클릭
5. 필터 설정:
   - 연도: 2024
   - 재해: 균열
6. 지도에서 빨강/주황 마커 확인
7. 마커 클릭 → 상세 정보 확인
   - 점검일, 담당자, 사진, 의견 조회
```

### 시나리오 2: 점검원 - 비원 석축 현장 점검

```
1. 메인 화면에서 [✅ 현장 점검] 클릭
2. 로그인 (이름, 소속, 직위 입력)
3. 대상지 선택: "비원 석축"
4. STEP 1: 일반 현황 입력
   - 날씨: 맑음
   - 설명: "전반적으로 양호..."
   - 전경 사진 촬영
5. STEP 2: 체크리스트 작성
   - 균열 상태: 양호
   - 석축 안정성: 보통
   - 배수로 상태: 불량
   - (나머지 항목 체크)
6. STEP 3: 종합 결과
   - 의견: "배수로 청소 필요"
   - 조치 사항: "낙엽 제거"
   - 판정: 주의 (🟠)
7. STEP 4: 최종 확인 → 제출
8. 완료 메시지 → 메인 화면으로 이동
```

---

## 💾 데이터 구조

### 점검 기록 JSON 구조

```json
{
  "id": "CHK_20240930_001",
  "siteId": "창덕궁_후원",
  "targetId": "돈화문_담장_A구간",
  "inspector": {
    "name": "홍길동",
    "organization": "문화재청",
    "position": "점검원"
  },
  "date": "2024-09-30T14:30:00",
  "weather": "맑음",
  "generalStatus": {
    "description": "전반적으로 양호하나 일부 균열 발견",
    "photos": ["photo1.jpg", "photo2.jpg"]
  },
  "checklist": {
    "structural": {
      "crack": "보통",
      "stability": "양호",
      "slope": "양호"
    },
    "drainage": {
      "condition": "불량",
      "waterProcessing": "보통"
    },
    "vegetation": {
      "intrusion": "양호",
      "rootImpact": "해당없음"
    }
  },
  "finalResult": {
    "opinion": "배수로 청소 필요",
    "action": "낙엽 제거 및 배수로 정비",
    "status": "주의",
    "photos": ["result1.jpg", "result2.jpg"]
  }
}
```

---

## 🐛 문제 해결 (Troubleshooting)

| 문제 | 원인 | 해결 방법 |
|------|------|----------|
| 지도가 안 보임 | API 키 미설정 | `config.js`에 API 키 입력 |
| 화면이 깨짐 | 파일 직접 실행 | 웹 서버 통해 실행 (Python/Live Server) |
| 데이터 저장 안 됨 | 시크릿 모드 | 일반 모드에서 실행 |
| 사진 업로드 안 됨 | 파일 크기 제한 | 5MB 이하 이미지 사용 |
| 느린 로딩 | 네트워크 지연 | Google Maps API 로딩 대기 |

---

## 📞 문의 및 지원

### 역할별 담당자

- **기획 관련**: 기획팀
- **디자인 관련**: 디자인팀
- **개발 기술 관련**: 개발팀
- **사용 문의**: 운영팀

---

## 📄 관련 문서

- `README.md` - 개발자용 기술 문서
- `config.example.js` - API 설정 예시
- HTML 주석 - 각 화면별 상세 설명

---

## 📜 버전 히스토리

| 버전 | 날짜 | 변경 사항 |
|------|------|----------|
| 2.1.0 | 2025-10-01 | 패키징 배포용 통합 가이드 (프로젝트 구조, 기술 스펙, 요구사항 추가) |
| 2.0.0 | 2025-09-30 | 전체 가이드 통합 및 재작성 |
| 1.5.0 | 2025-09-25 | 현장 점검 기능 추가 |
| 1.0.0 | 2025-09-15 | 초기 버전 (이력 조회 기능) |

---

**© 2025 전통 조경 안전 지도 서비스 (TLSM)**
**문서 버전**: 2.1.0
**최종 수정**: 2025-10-01
